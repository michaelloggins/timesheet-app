{
  "permissions": {
    "allow": [
      "Bash(az functionapp deployment list-publishing-profiles:*)",
      "Bash(az webapp deployment:*)",
      "Bash(az webapp restart:*)",
      "Bash(curl:*)",
      "Bash(az webapp log tail:*)",
      "Bash(az webapp config appsettings list:*)",
      "Bash(az ad app:*)",
      "Bash(npm run dev:*)",
      "Bash(az sql server firewall-rule list:*)",
      "Bash(az sql db show:*)",
      "Bash(az sql server ad-admin list:*)",
      "Bash(az ad user:*)",
      "Bash(az sql server ad-admin create:*)",
      "Bash(npm install:*)",
      "Bash(netstat:*)",
      "Bash(findstr:*)",
      "Bash(taskkill:*)",
      "Bash(az webapp identity show:*)",
      "Bash(az webapp show:*)",
      "Bash(az sql db query:*)",
      "Bash(az webapp config appsettings set:*)",
      "Bash(az monitor app-insights component show:*)",
      "Bash(az monitor app-insights component list:*)",
      "Bash(az resource list:*)",
      "Bash(az resource show:*)",
      "Bash(powershell -ExecutionPolicy Bypass -File setup-azure-api-scope.ps1)",
      "Bash(wslpath:*)",
      "Read(//c/Users/mloggins/OneDrive - MiraVista Diagnostics/**)",
      "Bash(az group list:*)",
      "Bash(az sql server firewall-rule create:*)",
      "Bash(cmd /c \"taskkill /PID 27108 /F\")",
      "Bash(cmd /c \"taskkill /PID 27880 /F\")",
      "Bash(powershell -Command:*)",
      "Bash(dir \"C:\\Projects\\Timesheet App\")",
      "Bash(git -C \"c:\\\\Projects\\\\Timesheet App\" log --oneline -20)",
      "Bash(cat:*)",
      "Bash(cmd /c \"taskkill /PID 19672 /F\")",
      "Bash(cmd /c \"taskkill /PID 25072 /F\")",
      "Bash(cmd /c \"taskkill /PID 16620 /F\")",
      "Bash(npm run build:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push)",
      "Bash(node -e \"\nconst sql = require\\(''mssql''\\);\n\nconst config = {\n  server: ''sql-miravista-prod.database.windows.net'',\n  database: ''TimesheetDB'',\n  user: ''sqladmin'',\n  password: ''dLeBONss9vox5pgnjpXYGXru'',\n  options: {\n    encrypt: true,\n    trustServerCertificate: false\n  }\n};\n\nasync function cleanup\\(\\) {\n  try {\n    const pool = await sql.connect\\(config\\);\n    \n    // Delete in order due to foreign keys\n    console.log\\(''Deleting TimesheetHistory...''\\);\n    const histResult = await pool.request\\(\\).query\\(''DELETE FROM TimesheetHistory''\\);\n    console.log\\(''Deleted'', histResult.rowsAffected[0], ''history records''\\);\n    \n    console.log\\(''Deleting TimeEntries...''\\);\n    const entriesResult = await pool.request\\(\\).query\\(''DELETE FROM TimeEntries''\\);\n    console.log\\(''Deleted'', entriesResult.rowsAffected[0], ''time entries''\\);\n    \n    console.log\\(''Deleting Timesheets...''\\);\n    const tsResult = await pool.request\\(\\).query\\(''DELETE FROM Timesheets''\\);\n    console.log\\(''Deleted'', tsResult.rowsAffected[0], ''timesheets''\\);\n    \n    console.log\\(''Done! All timesheet data cleared.''\\);\n    await pool.close\\(\\);\n  } catch \\(err\\) {\n    console.error\\(''Error:'', err.message\\);\n  }\n}\n\ncleanup\\(\\);\n\")",
      "Bash(node -e \"\nconst sql = require\\(''mssql''\\);\n\nconst config = {\n  server: ''sql-miravista-prod.database.windows.net'',\n  database: ''TimesheetDB'',\n  user: ''sqladmin'',\n  password: ''MiraVista2026!Secure#DB'',\n  options: {\n    encrypt: true,\n    trustServerCertificate: false\n  }\n};\n\nasync function cleanup\\(\\) {\n  try {\n    const pool = await sql.connect\\(config\\);\n    \n    // Delete in order due to foreign keys\n    console.log\\(''Deleting TimesheetHistory...''\\);\n    const histResult = await pool.request\\(\\).query\\(''DELETE FROM TimesheetHistory''\\);\n    console.log\\(''Deleted'', histResult.rowsAffected[0], ''history records''\\);\n    \n    console.log\\(''Deleting TimeEntries...''\\);\n    const entriesResult = await pool.request\\(\\).query\\(''DELETE FROM TimeEntries''\\);\n    console.log\\(''Deleted'', entriesResult.rowsAffected[0], ''time entries''\\);\n    \n    console.log\\(''Deleting Timesheets...''\\);\n    const tsResult = await pool.request\\(\\).query\\(''DELETE FROM Timesheets''\\);\n    console.log\\(''Deleted'', tsResult.rowsAffected[0], ''timesheets''\\);\n    \n    console.log\\(''Done! All timesheet data cleared.''\\);\n    await pool.close\\(\\);\n  } catch \\(err\\) {\n    console.error\\(''Error:'', err.message\\);\n  }\n}\n\ncleanup\\(\\);\n\")",
      "Bash(node -e \"\nconst sql = require\\(''mssql''\\);\n\nconst config = {\n  server: ''sql-miravista-prod.database.windows.net'',\n  database: ''TimesheetDB'',\n  user: ''sqladmin'',\n  password: ''MiraVista2026!Secure#DB'',\n  options: { encrypt: true, trustServerCertificate: false }\n};\n\nasync function check\\(\\) {\n  const pool = await sql.connect\\(config\\);\n  const result = await pool.request\\(\\).query\\(''SELECT ProjectID, ProjectNumber, ProjectName, ProjectType, IsActive FROM Projects''\\);\n  console.log\\(''Projects in database:''\\);\n  console.table\\(result.recordset\\);\n  await pool.close\\(\\);\n}\ncheck\\(\\).catch\\(console.error\\);\n\")",
      "Bash(sqlcmd -S sql-miravista-prod.database.windows.net -d TimesheetDB -U sqladmin -P \"MiraVista2026!Secure#DB\" -i \"C:\\\\Projects\\\\Timesheet App\\\\database\\\\migrations\\\\005_add_avatar_cache.sql\" -b)",
      "Bash(npx ts-node -e \"\nconst sql = require\\(''mssql''\\);\n\nconst config = {\n  server: ''sql-miravista-prod.database.windows.net'',\n  database: ''TimesheetDB'',\n  user: ''sqladmin'',\n  password: ''MiraVista2026!Secure#DB'',\n  options: {\n    encrypt: true,\n    trustServerCertificate: false\n  }\n};\n\nasync function runMigration\\(\\) {\n  try {\n    const pool = await sql.connect\\(config\\);\n    \n    // Add AvatarHash column\n    await pool.request\\(\\).query\\(''ALTER TABLE Users ADD AvatarHash NVARCHAR\\(64\\) NULL''\\);\n    console.log\\(''Added AvatarHash column''\\);\n    \n    // Add AvatarUpdatedDate column  \n    await pool.request\\(\\).query\\(''ALTER TABLE Users ADD AvatarUpdatedDate DATETIME2 NULL''\\);\n    console.log\\(''Added AvatarUpdatedDate column''\\);\n    \n    // Create index\n    await pool.request\\(\\).query\\(''CREATE INDEX IX_Users_AvatarHash ON Users\\(AvatarHash\\) WHERE AvatarHash IS NOT NULL''\\);\n    console.log\\(''Created index IX_Users_AvatarHash''\\);\n    \n    console.log\\(''Migration completed successfully!''\\);\n    await pool.close\\(\\);\n  } catch \\(err\\) {\n    console.error\\(''Migration error:'', err.message\\);\n    process.exit\\(1\\);\n  }\n}\n\nrunMigration\\(\\);\n\")",
      "Bash(node:*)",
      "Bash(npx swa:*)",
      "Bash(npx @azure/static-web-apps-cli deploy frontend/dist --env production)"
    ],
    "deny": [],
    "ask": []
  }
}
